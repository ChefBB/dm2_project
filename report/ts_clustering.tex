\section{Time Series Clustering}

The time series were first preprocessed using a logarithmic transformation
followed by per-series Z-score normalization. This ensures that each 
series contributes equally to the feature extraction and clustering, 
independent of its absolute scale.


\subsection{Baseline}
As a baseline, sequence of experiments were designed to systematically explore how different representations and distance measures
influenced the quality of time series clustering. 
We first evaluated simple Euclidean-based approaches using both \textit{Agglomerative hierarchical clustering} and \textit{KMeans} 
in order to establish a straightforward baseline. 
We then introduced Dynamic Time Warping (DTW), 
%and repeated the experiments with agglomerative clustering and \texttt{KMeans}, 
since it is well suited for handling temporal misalignment and shape-based similarity. 
Finally, we extracted the \texttt{catch22} feature set and applied both clustering algorithms again to assess 
whether a compact, interpretable feature representation could outperform raw time series distances. 
This progression allowed us to compare distance-based versus feature-based methods, 
evaluate the impact of temporal alignment.
In the \textit{Agglomerative hierarchical clustering} results, the dendrogram figure~\ref{fig:dtw_agglo}
clearly indicated the presence of three dominant clusters. Based on this observation, to assess the robustness we also experimented 
with cluster sizes of $k=3,4,5$.
%to examine how the \texttt{rating\_category} values were distributed across the groups. 
For \textit{KMeans}, both the elbow method figure~\ref{fig:elbow_kmean} and the silhouette score figure~\ref{fig:silhouette} suggested that $k=6$ was the most suitable choice, 
so to understand the stability of cluster structure we further inspected the distributions for $k=4,5,6$. \\ 
Across all these experiments, 
we observed that the majority of samples consistently formed one large, heterogeneous cluster containing 
almost all rating categories (\texttt{low}, \texttt{medium\_low}, \texttt{medium}, \texttt{medium\_high}, \texttt{high}), 
while a much smaller cluster captured only a few higher-rated series. 
Increasing the number of clusters mainly affected these small groups, which became further subdivided, 
whereas the large mixed cluster remained relatively stable. 
This behaviour was expected, as the IMDb time series exhibited strong overall similarity with 
only subtle differences in temporal patterns, causing most series to cluster together 
while only a few outliers separated.



% As a baseline, we applied K-Means clustering directly on the catch22 features, setting the number
% of clusters with elbow method and silhoutte score
% with k=2 and k=5()
% we can show dynamic time warping distane simple agglomerative clustering with average distance with k=2, or k=5
% we canshow simple agglomerative clustering with average distance with k=2, or k=5
% we can show simple agglomerative clustering with ward distance with k=2, or k=5
% we tried all these methods but due to page constraint we will show only the best one which is agglomerative clustering with average distance with k=5



% Pros and cons
% a) dynamic time warping takes too long even with sakoe chiba band as it is not useful, we use dtw 
% in the pipeline to reduce dimensionality
% b) simple agglomerative clustering with average distance and k = 2, we follow the algorithm, dendogram
% c) with k = 5, we make it comparable with k means with  catch 22 features
% d)

\subsection{Clustering Pipeline}
The following pipeline combines feature-based and shape-based clustering: 
initial feature extraction allows fast micro-clustering, 
while medoid selection and DTW-based final clustering focus on the 
temporal shape. 

\paragraph*{Feature extraction and micro-clustering.} 
From the normalized series, we extracted features using  
\texttt{catch22}.
These features were used for an initial micro-clustering step via 
\texttt{KMeans} with Euclidean distance setting k=200. The micro-clustering reduces 
the complexity of the dataset by grouping similar series in the feature 
space, enabling downstream operations on a smaller representative set.  

\paragraph*{Representative selection and PAA.} 

For each micro-cluster, we computed the medoid of the raw series using 
Dynamic Time Warping (DTW) distance. This approach preserves the temporal 
structure of the series within the cluster. The medoids were subsequently 
transformed using Piecewise Aggregate Approximation (PAA, $M=20$), which 
reduces the dimensionality while retaining the overall shape of the series. 
PAA also facilitates the use of DTW in the final clustering step by smoothing 
small fluctuations.  

\paragraph*{Final clustering.} 
Agglomerative clustering with average linkage was applied on the PAA-transformed 
medoids using DTW distance as the similarity measure. This allows grouping 
of series based on shape similarity rather than Euclidean proximity in feature space. 
The number of clusters was determined by visually inspecting the dendrogram and selecting a cut-off to obtain 5 clusters.
The final labels were propagated back to the original series.  \\

%\paragraph*{Cluster analysis and visualization.} 
We analyzed the resulting clusters with respect to \texttt{rating\_category} metadata. 
Figure~\ref{fig:ts_clustering_dist} shows the distribution of rating categories
across the clusters, while Figure~\ref{fig:ts_clustering_representatives}
displays the representative time series for each cluster.

% Figure~\ref{fig:cluster_2d} shows the resulting projections,
% colored by cluster membership. 

% \begin{figure}[h!]
%     \centering
%     \includegraphics[width=0.48\textwidth]{pca_clusters.png}
%     \includegraphics[width=0.48\textwidth]{tsne_clusters.png}
%     \caption{Two-dimensional projections of cluster representatives. \textbf{Left:} PCA. \textbf{Right:} t-SNE. Each color corresponds to a cluster.}
%     \label{fig:cluster_2d}
% \end{figure}

% Overall, the clusters reveal clear differences in temporal patterns among 
% the movies, particularly in peak timing, decay, and long-term tail behavior. 
% The similarity of results between PCA and t-SNE projections confirms that the cluster 
% structure is robust to the dimensionality reduction method. 

\begin{figure}[ht]
    \centering
    \begin{minipage}[t]{0.55\textwidth}
        \centering
        \includegraphics[width=\textwidth]{plotsss/ts_clustering_dist.png} 
        \captionof{figure}{Rating category Distribution}
        \label{fig:ts_clustering_dist} 
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.43\textwidth} 
        \includegraphics[width=\textwidth]{plotsss/ts_clustering_representatives.png}
        \captionof{figure}{Final Cluster Representatives}
        \label{fig:ts_clustering_representatives}
    \end{minipage}

\end{figure}


Cluster~3 is the largest and most heterogeneous group, containing movies
from all rating categories, with a predominance of medium-rated titles.
The shape of its representative time series is characterized by very high
opening revenues followed by a monotonic decline.
Clusters~0,~1 and~4 are instead dominated by highly rated movies and 
Cluter~1 has also a moderate amount of medium low rating movies.
Cluster 0 is characterized by a pronounced peak around the midpoint of the observation window,
Cluster 4 starts higher and has a similar overall shape to Cluster~0 but shifted toward earlier
time steps.
Cluster 1 displays an overall flatter temporal profile.
Finally, Cluster~2 consists of a single highly rated movie and captures an
atypical temporal pattern, with very low opening revenues followed by a sharp
increase toward the end of the observation window, highlighting an outlier
behavior.

To visualize the cluster structure, the 200 PAA-transformed medoids 
were projected into two dimensions using both PCA and t-SNE (perplexity=15). 
Both techniques reveal a modest separation among the three most populated clusters. 
In particular, the t-SNE projection highlights a clearer separation of Cluster~3 
from the others.

\begin{figure}[H]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \includegraphics[width=\textwidth]{plotsss/ts_pca.png} 
        \captionof{figure}{PCA Projection}
        \label{fig:ts_pca} 
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth} 
        \includegraphics[width=\textwidth]{plotsss/ts_tsne.png}
        \caption{t-SNE Projection}
        \label{fig:ts_tsne}
    \end{minipage}

\end{figure}





\begin{table}[ht]
    \centering
    \caption{Descriptive statistics of box office Gross by cluster.}
    \label{tab:cluster_descriptive}
    \begin{tabular}{ccccccccc}
    \toprule
    Cluster & Size & Mean & Std & Min & Max & Start ($t=0$) & Mid ($t=50$) & End ($t=99$) \\
    \midrule
    0 & 87  & $5.62\times10^{5}$ & $1.67\times10^{6}$ & $80$ & $3.45\times10^{7}$ & $1.49\times10^{5}$ & $8.32\times10^{5}$ & $2.07\times10^{5}$ \\
    1 & 5   & $2.03\times10^{5}$ & $3.11\times10^{5}$ & $49$ & $2.38\times10^{6}$ & $2.50\times10^{5}$ & $2.92\times10^{5}$ & $5.77\times10^{4}$ \\
    2 & 1   & $4.75\times10^{5}$ & $8.62\times10^{5}$ & $4834$ & $3.99\times10^{6}$ & $6.95\times10^{3}$ & $4.99\times10^{4}$ & $5.10\times10^{5}$ \\
    3 & 953 & $1.63\times10^{6}$ & $4.36\times10^{6}$ & $8$ & $1.57\times10^{8}$ & $1.06\times10^{7}$ & $6.42\times10^{5}$ & $1.03\times10^{5}$ \\
    4 & 88  & $7.19\times10^{5}$ & $1.93\times10^{6}$ & $4$ & $2.41\times10^{7}$ & $1.48\times10^{6}$ & $6.36\times10^{5}$ & $1.07\times10^{5}$ \\
    \bottomrule
    \end{tabular}
\end{table}



    % --- LEFT: plot ---
    \begin{wrapfigure}{l}{0.48\textwidth}
        \centering
        \vspace{-0.5em}
        \includegraphics[width=\linewidth]{plotsss/ts_log_clustering.png}
        \caption{Log-scale average box office gross by cluster.
        Solid lines represent cluster mean trajectories, while shaded areas
        indicate the range between minimum and maximum values.}
        \label{fig:cluster_log}
        \vspace{-1em}
    \end{wrapfigure}
    \hfill
    
   
    Table~\ref{tab:cluster_descriptive} reports descriptive statistics of the domestic
    box office gross time series for each cluster.
    In addition to global statistics (mean, standard deviation, minimum and maximum),
    the average gross at the release time step ($t=0$), at the midpoint of the observation
    window ($t=50$), and at the final time step ($t=99$) is reported in order to summarize
    the typical temporal evolution of movies belonging to each cluster.

    These pieces of information about absolute values are complemented by
    the log-scale plot in Figure~\ref{fig:cluster_log}, which provides an overview
    of the temporal dynamics for all movies within each cluster. 
    Compared to the previous analysis on the representative microcluster medoids, 
    we now consider the full set of original time series, confirming that the
    temporal patterns identified earlier are generally preserved.

    Cluster~2, originally identified as a single outlier among the medoids, 
    remains an isolated series after mapping back to the original time series,
    confirming its atypical behavior.

    % The results highlight substantial heterogeneity across clusters, both in terms of
    % revenue scale and temporal dynamics.
    % The largest cluster (Cluster~3, 953 movies) is characterized by extremely high
    % initial revenues, with an average gross exceeding $10^7$ USD at release,
    % followed by a sharp decline over time.
    % A large fraction of total revenue is therefore concentrated in the initial period
    % after release.
    
    % Clusters~4 and~0 (88 and 87 movies, respectively) exhibit intermediate behaviors.
    % Cluster~4 shows relatively high initial revenues (on the order of $10^6$ USD)
    % followed by a gradual decay, whereas Cluster~0 is characterized by lower initial values
    % and a pronounced peak around the midpoint of the observation window.
    
    % The remaining clusters are much smaller in size and capture atypical dynamics.
    % Cluster~1 includes movies with consistently low revenues throughout the observation
    % period, while Cluster~2 consists of a single movie displaying an unusual pattern
    % with very low opening revenues and a sharp increase toward the end of the time horizon,
    % indicative of outlier behavior.



